<html>
<head>
  <style>
  
    div.row { 
      flow:horizontal; 
    }
  
    form.window
    {
      prototype: DesktopWidget;
      background-image: url(images/widget-back.png);
      background-repeat: expand stretch-left stretch-right stretch-center;
      background-position: 16 16 16 16;
      height:110dip;  
      width:110dip;
			padding:4px;
      //overflow:hidden;
    }
    
    form.window[placement="left"]
    {
      background-image: url(images/widget-back-left.png);
    }
    form.window[placement="top"]
    {
      background-image: url(images/widget-back-top.png);
    }
    form.window[placement="bottom"]
    {
      background-image: url(images/widget-back-bottom.png);
    }
    form.window[placement="right"]
    {
      background-image: url(images/widget-back-right.png);
    }
    
		form.window button.go-home 
		{
		  display:none;
			transition:none;
		}
		form.window[placement] button.go-home 
		{
		  display:block;
		}
		
    form.window > caption
    {
      width:*;
      line-height:1.4em;
      padding:4px 10px;
      cursor:move;
    }
    form.window > div
    {
      width:*;
      height:*;
      margin:0 6px 6px 6px;
      background-color:window;
      border-radius:16px;
      padding:8px;
    }
    
    form.window[placement="left"] > div 
    {
      border-radius:16px 0 0 16px;
    }
    form.window[placement="right"] > div 
    {
      border-radius:0 16px 16px 0;
    }
    form.window[placement="top"] > div 
    {
      border-radius:16px 16px 0 0;
    }
    form.window[placement="bottom"] > div 
    {
      border-radius:0 0 16px 16px;
    }
    
    
    form.window:not(:popup) .when-airborn { display:none; }
    span.when-airborn { color:red; }
  </style>  
  <script type="text/tiscript" src="desktop-widgets.tis" />
  <script type="text/tiscript">
    $(#button-min).onClick = function () {
      view.state = view.WINDOW_MINIMIZED;
    }
  </script>
</head>
<body>
  <input|button #button-min value="最小化" />
  
  请尝试移动下面的"窗口"到视图外部。
  <ol>
    <li>如果"窗口"移动的最终位置在视图内部，则"窗口"将自动回到它的原始位置。</li>
    <li>如果"窗口"移动到视图外部，则"窗口"会停靠在视图窗口的边缘。<code>Element.move(..., #attached-window)</code></li>
    <li>如果"窗口"移动到视图外部足够远的地方，则它将从视图中脱离出来——移动视图将不会导致这个"窗口"同步跟着移动。<code>Element.move(..., #detached-window)</code></li>
  </ol>
  
  <div .row #test>
    <form.window>
      <caption>窗口 #1</caption>
      <div>
        <text.status>.</text>  <!--这个标签能显示窗口的移动状态-->
        <button .go-home>回到原始位置</button>
      </div>
    </form>
    <form.window style="left:150px">
      <caption>窗口 #2</caption>
      <div>
        <text.status>.</text> <!--这个标签能显示窗口的移动状态-->
        <button .go-home>回到原始位置</button>
      </div>
    </form>
    <form.window style="left:300px">
      <caption>窗口 #3</caption>
      <div>
        <text.status>.</text> <!--这个标签能显示窗口的移动状态-->
        <button .go-home>回到原始位置</button>
      </div>
    </form>
  </div>

</body>
</html>
